{"remainingRequest":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\src\\views\\GoodSourcePage\\Details.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\src\\views\\GoodSourcePage\\Details.vue","mtime":1692962904000},{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692962904000},{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1692962904000},{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692962904000},{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1692962904000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFkZE9yZGVyVG9DYXJ0IH0gZnJvbSAiLi4vLi4vYXBpL2NhcnQiOwppbXBvcnQgeyBzZWxlY3RPcmRlckJ5SWQgfSBmcm9tICIuLi8uLi9hcGkvb3JkZXIiOwppbXBvcnQgQ2hhbmdlTWVzc2FnZSBmcm9tICIuLi8uLi9jb21wb25lbnRzL0NoYW5nZU1lc3NhZ2UudnVlIjsKaW1wb3J0IHsgc2VsZWN0VXNlckJ5VXNlcm5hbWUgfSBmcm9tICIuLi8uLi9hcGkvdXNlciI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IFtdLAogICAgICBvd25lckluZm86IHt9LAogICAgICB1c2VyR29vZHM6IFtdLAogICAgICB1cGRhdGVHb29kSW5mbzoge30sCiAgICAgIHVwZGF0ZVVzZXJEYXRhOnt9CiAgICB9OwogIH0sCiAgZmlsdGVyczogewogICAgY2hhbmdlVGltZSh0aW1lKSB7CiAgICAgIHJldHVybiB0aW1lLnNsaWNlKDAsIDEwKTsKICAgIH0sCiAgICBmb3JtYXRUaW1lcjogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7CiAgICAgIGxldCB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICBsZXQgTU0gPSBkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICBNTSA9IE1NIDwgMTAgPyAiMCIgKyBNTSA6IE1NOwogICAgICBsZXQgZCA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICBkID0gZCA8IDEwID8gIjAiICsgZCA6IGQ7CiAgICAgIGxldCBoID0gZGF0ZS5nZXRIb3VycygpOwogICAgICBoID0gaCA8IDEwID8gIjAiICsgaCA6IGg7CiAgICAgIGxldCBtID0gZGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgIG0gPSBtIDwgMTAgPyAiMCIgKyBtIDogbTsKICAgICAgbGV0IHMgPSBkYXRlLmdldFNlY29uZHMoKTsKICAgICAgcyA9IHMgPCAxMCA/ICIwIiArIHMgOiBzOwogICAgICByZXR1cm4geSArICItIiArIE1NICsgIi0iICsgZCArICIgIjsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsgQ2hhbmdlTWVzc2FnZSB9LAogIHByb3BzOiB7CiAgICBjdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICB9LAogICAgY2Rlc2NpaWJlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRTaG9wY2FydENsaWNrKCkgewogICAgICBhZGRPcmRlclRvQ2FydCh7CiAgICAgICAgb3JkZXJfaWQ6IHRoaXMuZGF0YS5vcmRlcklkLAogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICBpZiAocmVzLmZsYWcgPT0gdHJ1ZSkgewogICAgICAgICAgICBhbGVydChyZXMubWVzc2FnZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydChyZXMubWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgYWxlcnQoIua3u+WKoOWksei0pSzor7flhYjnmbvlvZUiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VJbmZvKGl0ZW0pIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDaGFuZ2VkT3JkZXJJZCIsIGl0ZW0pOwogICAgICBzZWxlY3RPcmRlckJ5SWQoewogICAgICAgIG9yZGVyX2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS5jaGFuZ2VkT3JkZXJJZCwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnVwZGF0ZUdvb2RJbmZvID0gcmVzLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRTYWxlc0luZm8oKXsKICAgICAgc2VsZWN0VXNlckJ5VXNlcm5hbWUoewogICAgICAgIHVzZXJfbmFtZTogdGhpcy5kYXRhLm93bk5hbWUsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudXBkYXRlVXNlckRhdGEgPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goZXJyPT57CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CgogICAgc2VsZWN0T3JkZXJCeUlkKHsKICAgICAgb3JkZXJfaWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5Lm9yZGVySWQsCiAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgaWYgKHJlcy5mbGFnID09IHRydWUpIHsKICAgICAgICB0aGlzLmRhdGEgPSByZXMuZGF0YTsKCiAgICAgICAgdGhpcy5nZXRTYWxlc0luZm8oKQogICAgICB9CiAgICB9KTsKICB9LAp9Owo="},{"version":3,"sources":["Details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Details.vue","sourceRoot":"src/views/GoodSourcePage","sourcesContent":["<!--从首页进入，关于商品细节的页面-->\n\n<template>\n  <div class=\"details-box\">\n    <img v-if=\"data.picture\" :src=\"$store.state.imgShowRoad + '/file/' + data.picture\" alt=\"\" />\n    <img v-else src=\"../../assets/img/wutu.gif\" alt=\"\" style=\"border:1px solid #f2f2f2;\"/>\n    <div class=\"info\">\n      <h4 class=\"title\">{{ data.title }}</h4>\n      <div class=\"content\" :title=\"data.content\">{{ data.content }}</div>\n      <span class=\"price\">￥{{ data.price }}</span>\n      <div class=\"time\">\n        <span style=\"margin-right:30px;\">发布时间：{{ data.createTime | changeTime }}</span>\n        <span>最近修改时间：{{ data.updateTime | changeTime }}</span>\n      </div>\n      <div class=\"item-style\">\n        <div class=\"operation\">\n          <div class=\"operation-item\"><img src=\"../../assets/img/good.png\" class=\"operation-img\" alt=\"\" /> 点赞</div>\n          <div class=\"operation-item\"><img src=\"../../assets/img/no-star.png\" class=\"operation-img\" alt=\"\" /> 收藏</div>\n          <div class=\"operation-item\"><img src=\"../../assets/img/fill-in.png\" class=\"operation-img\" alt=\"\" />评论</div>\n        </div>\n        <div class=\"btn-content\">\n          <el-button type=\"success\" plain round @click=\"addShopcartClick\" v-if=\"data.type == 'goods'\">加入购物车</el-button>\n          <el-popover placement=\"right\" width=\"320\" trigger=\"hover\">\n            <div>\n              <div class=\"item-sales\">卖家姓名：<span class=\"sales-text\">{{updateUserData.userName}}</span></div>\n              <div class=\"item-sales\">卖家地址：<span class=\"sales-text\">{{updateUserData.address}}</span></div>\n              <div class=\"item-sales\">卖家手机号码：<span class=\"sales-text\">{{updateUserData.phone}}</span></div>\n              <div class=\"item-sales\">更新时间：<span class=\"sales-text\">{{updateUserData.updateTime | formatTimer}}</span></div>\n            </div>\n            <el-button type=\"danger\" slot=\"reference\" @click.once=\"changeInfo(item.orderId)\" v-show=\"data.type == 'needs'\">联系买家</el-button>\n          </el-popover>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { addOrderToCart } from \"../../api/cart\";\nimport { selectOrderById } from \"../../api/order\";\nimport ChangeMessage from \"../../components/ChangeMessage.vue\";\nimport { selectUserByUsername } from \"../../api/user\";\n\nexport default {\n  data() {\n    return {\n      data: [],\n      ownerInfo: {},\n      userGoods: [],\n      updateGoodInfo: {},\n      updateUserData:{}\n    };\n  },\n  filters: {\n    changeTime(time) {\n      return time.slice(0, 10);\n    },\n    formatTimer: function(value) {\n      let date = new Date(value);\n      let y = date.getFullYear();\n      let MM = date.getMonth() + 1;\n      MM = MM < 10 ? \"0\" + MM : MM;\n      let d = date.getDate();\n      d = d < 10 ? \"0\" + d : d;\n      let h = date.getHours();\n      h = h < 10 ? \"0\" + h : h;\n      let m = date.getMinutes();\n      m = m < 10 ? \"0\" + m : m;\n      let s = date.getSeconds();\n      s = s < 10 ? \"0\" + s : s;\n      return y + \"-\" + MM + \"-\" + d + \" \";\n    }\n  },\n  components: { ChangeMessage },\n  props: {\n    ctype: {\n      type: String,\n    },\n    cdesciibe: {\n      type: String,\n    },\n  },\n  methods: {\n    addShopcartClick() {\n      addOrderToCart({\n        order_id: this.data.orderId,\n      })\n        .then((res) => {\n          console.log(res);\n          if (res.flag == true) {\n            alert(res.message);\n          } else {\n            alert(res.message);\n          }\n        })\n        .catch((err) => {\n          alert(\"添加失败,请先登录\");\n        });\n    },\n    changeInfo(item) {\n      this.$store.commit(\"updateChangedOrderId\", item);\n      selectOrderById({\n        order_id: this.$store.state.changedOrderId,\n      })\n        .then((res) => {\n          this.updateGoodInfo = res.data;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    getSalesInfo(){\n      selectUserByUsername({\n        user_name: this.data.ownName,\n      }).then((res) => {\n        this.updateUserData = res.data;\n      }).catch(err=>{\n        console.log(err);\n      })\n    }\n  },\n  mounted() {\n\n    selectOrderById({\n      order_id: this.$route.query.orderId,\n    }).then((res) => {\n      if (res.flag == true) {\n        this.data = res.data;\n\n        this.getSalesInfo()\n      }\n    });\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.details-box {\n  width: 1100px;\n  height: 100%;\n  margin: 20px auto;\n  padding: 20px;\n  padding-right: 50px;\n  padding-left: 50px;\n  background: #fff;\n  display: flex;\n  justify-content: space-between;\n  img {\n    width: 300px;\n    height: 300px;\n    border-radius: 6px;\n  }\n  .info {\n    position: relative;\n    width: 680px;\n    height: 300px;\n    border: 1px solid #f2f2f2;\n    // box-shadow: 3px 3px 3px rgba(3, 0, 0, 0.07);\n    border-radius: 6px;\n    padding: 10px 20px;\n    .title {\n      font-size: 22px;\n      font-weight: bold;\n    }\n    .content {\n      height: 100px;\n      border: 1px dashed #f2f2f2;\n      line-height: 23px;\n      padding: 5px 10px;\n      /*超出的部分隐藏*/\n      overflow: hidden;\n      /*文字用省略号替代超出的部分*/\n      text-overflow: ellipsis;\n      /*弹性伸缩盒子模型显示*/\n      display: -webkit-box;\n      /*限制在一个块元素显示文本的行数*/\n      -webkit-line-clamp: 4;\n      /*设置或检索伸缩盒对象的子元素排列方式*/\n      -webkit-box-orient: vertical;\n    }\n    .price {\n      color: red;\n      font-size: 25px;\n      font-weight: bold;\n    }\n    .time {\n      margin-top: 5px;\n      color: #999;\n      display: flex;\n      justify-content: flex-start;\n    }\n    .item-style{\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-start;\n      margin-top: 5px;\n      align-items: center;\n    }\n  }\n  .operation {\n    display: flex;\n    margin-top: 10px;\n    margin-right: 150px;\n    .operation-item{\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      margin-right: 10px;\n      .operation-img{\n        width: 20px;\n        height: 20px;\n        margin-bottom: 5px;\n        border-radius: 6px;\n      }\n    }\n  }\n  .btn-content{\n    margin-top: 10px;\n  }\n  .item-sales{\n    color: #333 !important;\n    line-height: 30px;\n    max-height: 30px;\n    .sales-text{\n      color: #666;\n    }\n  }\n}\n</style>\n"]}]}