{"remainingRequest":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\src\\views\\UserManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\src\\views\\UserManage.vue","mtime":1692962904000},{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692962904000},{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1692962904000},{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692962904000},{"path":"D:\\课设\\SDU_2023_Nongchanpin37-master\\SDU_2023_Nongchanpin37-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1692962904000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgc2VsZWN0VXNlckJ5VXNlcm5hbWUsCiAgZGVsZXRlVXNlckJ5VXNlcm5hbWUsCiAgdXBkYXRlVXNlckJ5VXNlcm5hbWUsCiAgc2VsZWN0QWxsVXNlclBhZ2UsCn0gZnJvbSAiLi4vYXBpL3VzZXIiOwppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICIuLi9jb21wb25lbnRzL1BhZ2luYXRpb24udnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGluamVjdDogWyJyZWxvYWQiXSwKICBjb21wb25lbnRzOiB7IFBhZ2luYXRpb24gfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlckRhdGE6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nVGFibGVWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBmb3JtTGFiZWxXaWR0aDogIjEyMHB4IiwKICAgICAgZGVsZXRlVXNlck5hbWU6ICIiLAogICAgICB0b3RhbDogMCwKICAgICAgcGFnZVNpemU6IDksCiAgICAgIHVybDogIi91c2VyL3NlYXJjaC8iLAogICAgICB1c2Vyc0NvdW50OiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCIvdXNlci9zZWFyY2gvcGFnZUNvZGUiKQogICAgICAgID8gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiL3VzZXIvc2VhcmNoL3BhZ2VDb2RlIikKICAgICAgICA6IDEsCiAgICAgIHVwZGF0ZVVzZXJEYXRhOiB7fSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBwYWdlQ2xpY2soaXRlbSkgewogICAgICB0aGlzLnVzZXJEYXRhID0gaXRlbTsKICAgIH0sCiAgICBtYW5hZ2VyQ2hhbmdlSW5mbyh1c2VyTmFtZSkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgICAgc2VsZWN0VXNlckJ5VXNlcm5hbWUoewogICAgICAgIHVzZXJfbmFtZTogdXNlck5hbWUsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudXBkYXRlVXNlckRhdGEgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlVXNlck5hbWVDbGljayhkZWxldGVVc2VyTmFtZSkgewogICAgICB0aGlzLmRlbGV0ZVVzZXJOYW1lID0gZGVsZXRlVXNlck5hbWU7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgbWFuYWdlckRlbGV0ZVVzZXIodXNlck5hbWUpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIGRlbGV0ZVVzZXJCeVVzZXJuYW1lKHsKICAgICAgICB1c2VyX25hbWU6IHVzZXJOYW1lLAogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLmZsYWcgPT0gdHJ1ZSkgewogICAgICAgICAgYWxlcnQocmVzLm1lc3NhZ2UpOwogICAgICAgICAgdGhpcy5yZWxvYWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQocmVzLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0Q0hhbmdlSW5mbygpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB1cGRhdGVVc2VyQnlVc2VybmFtZSh7CiAgICAgICAgdXNlcl9uYW1lOiB0aGlzLnVwZGF0ZVVzZXJEYXRhLnVzZXJOYW1lLAogICAgICAgIG5pY2tOYW1lOiB0aGlzLnVwZGF0ZVVzZXJEYXRhLm5pY2tOYW1lLAogICAgICAgIGlkZW50aXR5TnVtOiB0aGlzLnVwZGF0ZVVzZXJEYXRhLmlkZW50aXR5TnVtLAogICAgICAgIHBob25lOiB0aGlzLnVwZGF0ZVVzZXJEYXRhLnBob25lLAogICAgICAgIGFkZHJlc3M6IHRoaXMudXBkYXRlVXNlckRhdGEuYWRkcmVzcywKICAgICAgICByb2xlOiB0aGlzLnVwZGF0ZVVzZXJEYXRhLnJvbGUsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5mbGFnID09IHRydWUpIHsKICAgICAgICAgICAgYWxlcnQocmVzLm1lc3NhZ2UpOwogICAgICAgICAgICB0aGlzLnJlbG9hZCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxlcnQocmVzLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGFsZXJ0KCLkv67mlLnlpLHotKUiKTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVVc2VyQWN0aXZlSW5kZXgiLCAiNSIpOwogICAgICBzZWxlY3RBbGxVc2VyUGFnZSh7CiAgICAgICAgcGFnZU51bTp0aGlzLnVzZXJzQ291bnQsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudXNlckRhdGEgPSByZXMuZGF0YS5saXN0OwogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgfSkKICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICB9LAp9Owo="},{"version":3,"sources":["UserManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserManage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"user-manage\">\n    <el-table\n      ref=\"multipleTable\"\n      tooltip-effect=\"dark\"\n      style=\"width: 100%\"\n      :data=\"userData\">\n      <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n      <el-table-column prop=\"userName\" label=\"用户名\">\n      </el-table-column>\n      <el-table-column prop=\"nickName\" label=\"昵称\">\n      </el-table-column>\n      <el-table-column\n        prop=\"identityNum\"\n        label=\"身份证\"\n        width=\"120\"\n        show-overflow-tooltip\n      >\n      </el-table-column>\n      <el-table-column prop=\"role\" label=\"角色\" width=\"140\"> </el-table-column>\n      <el-table-column prop=\"phone\" label=\"电话\" width=\"120\"> </el-table-column>\n      <el-table-column prop=\"address\" label=\"地址\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"创建日期\" width=\"100\">\n        <template slot-scope=\"scope\">{{\n          scope.row.createTime.slice(0, 10)\n        }}</template>\n      </el-table-column>\n      <el-table-column label=\"修改日期\" width=\"100\">\n        <template slot-scope=\"scope\">{{ scope.row.updateTime.slice(0, 10)}}</template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"110\">\n        <template slot-scope=\"scope\">\n          <div>\n            <el-button type=\"success\" icon=\"el-icon-edit\" circle\n              @click=\"managerChangeInfo(scope.row.userName)\"></el-button>\n            <el-button type=\"danger\" icon=\"el-icon-delete\" circle\n              @click=\"deleteUserNameClick(scope.row.userName)\"></el-button>\n            <el-dialog title=\"提示\" :visible.sync=\"dialogVisible\" width=\"30%\">\n              <span>确认删除该用户</span>\n              <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogVisible = false\">取 消</el-button>\n                <el-button type=\"success\" @click=\"managerDeleteUser(deleteUserName)\">确 定</el-button>\n              </span>\n            </el-dialog>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog\n      title=\"用户信息\"\n      :visible.sync=\"dialogFormVisible\"\n      class=\"manager-change-user-info\"\n    >\n      <el-form class=\"user-info\">\n        <el-form-item\n          label=\"用户名\"\n          :label-width=\"formLabelWidth\"\n          class=\"manager-change-name\"\n        >\n          <el-input\n            autocomplete=\"off\"\n            v-model=\"updateUserData.userName\"\n            :disabled=\"true\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"昵称\"\n          :label-width=\"formLabelWidth\"\n          class=\"manager-change-phone\"\n        >\n          <el-input\n            autocomplete=\"off\"\n            v-model=\"updateUserData.nickName\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"身份证号\"\n          :label-width=\"formLabelWidth\"\n          class=\"manager-change-phone\"\n        >\n          <el-input\n            autocomplete=\"off\"\n            v-model=\"updateUserData.identityNum\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"角色\"\n          :label-width=\"formLabelWidth\"\n          class=\"manager-change-role\"\n        >\n          <el-input autocomplete=\"off\" v-model=\"updateUserData.role\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"电话\"\n          :label-width=\"formLabelWidth\"\n          class=\"manager-change-phone\"\n        >\n          <el-input\n            autocomplete=\"off\"\n            v-model=\"updateUserData.phone\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"地址\"\n          :label-width=\"formLabelWidth\"\n          class=\"manager-change-address\"\n        >\n          <el-input\n            autocomplete=\"off\"\n            v-model=\"updateUserData.address\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"success\" @click=\"submitCHangeInfo\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <pagination\n      :cUrl=\"url\"\n      :cTotal=\"total\"\n      :cPageSize=\"pageSize\"\n      @item-click=\"pageClick\"\n    ></pagination>\n  </div>\n</template>\n\n<script>\nimport {\n  selectUserByUsername,\n  deleteUserByUsername,\n  updateUserByUsername,\n  selectAllUserPage,\n} from \"../api/user\";\nimport Pagination from \"../components/Pagination.vue\";\nexport default {\n  inject: [\"reload\"],\n  components: { Pagination },\n  data() {\n    return {\n      userData: [],\n      dialogVisible: false,\n      dialogTableVisible: false,\n      dialogFormVisible: false,\n      formLabelWidth: \"120px\",\n      deleteUserName: \"\",\n      total: 0,\n      pageSize: 9,\n      url: \"/user/search/\",\n      usersCount: sessionStorage.getItem(\"/user/search/pageCode\")\n        ? sessionStorage.getItem(\"/user/search/pageCode\")\n        : 1,\n      updateUserData: {},\n    };\n  },\n  methods: {\n    pageClick(item) {\n      this.userData = item;\n    },\n    managerChangeInfo(userName) {\n      this.dialogFormVisible = true;\n      selectUserByUsername({\n        user_name: userName,\n      }).then((res) => {\n        this.updateUserData = res.data;\n      });\n    },\n    deleteUserNameClick(deleteUserName) {\n      this.deleteUserName = deleteUserName;\n      this.dialogVisible = true;\n    },\n    managerDeleteUser(userName) {\n      this.dialogVisible = false;\n      deleteUserByUsername({\n        user_name: userName,\n      }).then((res) => {\n        if (res.flag == true) {\n          alert(res.message);\n          this.reload();\n        } else {\n          alert(res.data);\n        }\n      });\n    },\n    submitCHangeInfo() {\n      this.dialogFormVisible = false;\n      updateUserByUsername({\n        user_name: this.updateUserData.userName,\n        nickName: this.updateUserData.nickName,\n        identityNum: this.updateUserData.identityNum,\n        phone: this.updateUserData.phone,\n        address: this.updateUserData.address,\n        role: this.updateUserData.role,\n      }).then((res) => {\n          if (res.flag == true) {\n            alert(res.message);\n            this.reload();\n          } else {\n            alert(res.data);\n          }\n        })\n        .catch((err) => {\n          alert(\"修改失败\");\n        });\n    },\n  },\n  created() {\n    this.$store.commit(\"updateUserActiveIndex\", \"5\");\n      selectAllUserPage({\n        pageNum:this.usersCount,\n      }).then((res) => {\n        this.userData = res.data.list;\n        this.total = res.data.total;\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.user-manage {\n  width: 1100px;\n  background: #fff;\n  margin: 10px auto;\n  padding: 10px 20px;\n  .manager-change-user-info {\n    .el-dialog {\n      width: 500px;\n      .el-dialog__body {\n        height: 400px;\n        .user-info {\n          width: 400px;\n          padding: 0;\n          .manager-change-name,\n          .manager-change-password,\n          .manager-change-phone,\n          .manager-change-address {\n            .el-form-item__label {\n              width: 100px !important;\n            }\n            width: 400px;\n            margin-right: 200px;\n          }\n        }\n      }\n    }\n  }\n}\n</style>"]}]}