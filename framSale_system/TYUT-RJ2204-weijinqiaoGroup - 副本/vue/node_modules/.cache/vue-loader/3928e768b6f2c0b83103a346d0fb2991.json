{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Desktop\\vue\\src\\views\\KonwledgePage\\KnowledgeDetail.vue?vue&type=style&index=0&id=0de8a5c1&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\vue\\src\\views\\KonwledgePage\\KnowledgeDetail.vue","mtime":1688720898508},{"path":"C:\\Users\\Lenovo\\Desktop\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\vue\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmtub3dsZWdlLWRldGFpbC1jb250YWluZXJ7CiAgd2lkdGg6IDExMDBweDsKCiAgbWFyZ2luOiAwIGF1dG87CiAgYmFja2dyb3VuZDogI2ZmZjsKICBtaW4taGVpZ2h0OiAxMjAwcHg7CiAgcGFkZGluZzogMTBweCAyMHB4OwogIG1hcmdpbi10b3A6IDMwcHg7CiAgLnRpdGxlewogICAgZm9udC1zaXplOiAyNXB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgfQogIC50aXBzewogICAgY29sb3I6ICM5OTk7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKICAgIGhlaWdodDogMzBweDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgfQogIC5kZXRhaWwtaW1newogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgbWFyZ2luLXRvcDogNDBweDsKICAgIHZpZGVvewogICAgICBib3JkZXI6IDFweCBzb2xpZCAjZjJmMmYyOwogICAgfQogICAgaW1newogICAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICB9CiAgfQogIC5kZXRhaWwtY29udGVudHsKICAgIGZvbnQtc2l6ZTogMTdweDsKICAgIG1hcmdpbi10b3A6IDIwcHg7CgogIH0KICAuY29tbWVudC1jb250YWluZXJ7CiAgICBjbGVhcjogYm90aDsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICAuY29tbWVudC1udW17CiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICBmb250LXNpemU6IDE3cHg7CiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICB9CiAgICAuY29tbWVudC1pdGVtewogICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2YyZjJmMjsKICAgICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgICBtYXJnaW46IDIwcHggMDsKICAgICAgd29yZC1icmVhazogYnJlYWstYWxsOwogICAgICAuY29tbWVudC10aXBzewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdzsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOwogICAgICAgIC5jb2xvcjZ7CiAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["KnowledgeDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"KnowledgeDetail.vue","sourceRoot":"src/views/KonwledgePage","sourcesContent":["<!-- 农业知识详情 -->\n<template>\n  <div class=\"knowlege-detail-container\">\n    <div class=\"title\">{{updateInfo.title}}</div>\n    <div class=\"tips\">\n      <span>作者：</span>\n      <span style=\"margin-right:20px;\">{{updateInfo.ownName}}</span>\n      <span>日期：</span>\n      <span>{{updateInfo.updateTime | formatTimer}}</span>\n    </div>\n    <div class=\"detail-img\">\n      <video v-if=\"updateInfo.type==='mp4'||updateInfo.type==='MP4'\" id=\"video\" width=\"900\" height=\"360\" :src=\"$store.state.imgShowRoad + '/file/' + updateInfo.picPath\" controls> </video>\n      <img v-else style=\"width:657px;height:300px;\" :src=\"$store.state.imgShowRoad + '/file/' + updateInfo.picPath\" alt=\"\" />\n    </div>\n    <div class=\"detail-content\">\n      <p>{{updateInfo.content}}</p>\n    </div>\n\n    <div class=\"comment-container\">\n      <div class=\"comment-num\">评论共{{commentArray.length||0}}条</div>\n      <div class=\"comment-item\" v-for=\"(item,index) in commentArray\" :key=\"index\">\n        <div>{{item.content}}</div>\n        <div class=\"comment-tips\">\n          <div style=\"margin-right:40px;\">评论人：<span class=\"color6\">{{item.ownName}}</span></div>\n          <div>评论时间：<span class=\"color6\">{{item.createTime|formatTimer2}}</span></div>\n        </div>\n\n      </div>\n      <div v-if=\"commentArray.length==0\" style=\"width: 100%;text-align: center;margin: 50px 0px\">\n        <img src=\"../../assets/page4/noComments.png\" alt=\"\" >\n      </div>\n\n      <div class=\"comment-num\">发表评论</div>\n      <el-input type=\"textarea\" v-model=\"content\" :rows=\"5\"></el-input>\n      <div style=\"margin-top:20px;display: flex;flex-direction: row;justify-content: flex-end\">\n        <el-button type=\"success\" plain @click=\"handleComment\">添加评论</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { selectKnowledgeById,selectComment,addComment } from \"../../api/knowledge\";\n\nexport default {\n  data(){\n    return{\n      updateInfo:{},\n      content:'',\n      commentArray:[]\n    }\n  },\n  filters: {\n    formatTimer: function(value) {\n      let date = new Date(value);\n      let y = date.getFullYear();\n      let MM = date.getMonth() + 1;\n      MM = MM < 10 ? \"0\" + MM : MM;\n      let d = date.getDate();\n      d = d < 10 ? \"0\" + d : d;\n      let h = date.getHours();\n      h = h < 10 ? \"0\" + h : h;\n      let m = date.getMinutes();\n      m = m < 10 ? \"0\" + m : m;\n      let s = date.getSeconds();\n      s = s < 10 ? \"0\" + s : s;\n      return y + \"-\" + MM + \"-\" + d + \" \";\n    },\n    formatTimer2: function(value) {\n      let date = new Date(value);\n      let y = date.getFullYear();\n      let MM = date.getMonth() + 1;\n      MM = MM < 10 ? \"0\" + MM : MM;\n      let d = date.getDate();\n      d = d < 10 ? \"0\" + d : d;\n      let h = date.getHours();\n      h = h < 10 ? \"0\" + h : h;\n      let m = date.getMinutes();\n      m = m < 10 ? \"0\" + m : m;\n      let s = date.getSeconds();\n      s = s < 10 ? \"0\" + s : s;\n      return y + \"-\" + MM + \"-\" + d + \" \"+h+\":\"+m;\n    }\n  },\n  methods:{\n    getData(){\n      this.$store.commit(\"updateActiveIndex\", \"4\");\n      selectKnowledgeById({\n        knowledgeId: this.$route.params.id\n      }).then((res) => {\n        let tmp = res.data;\n        const flieArr =  tmp.picPath.split('.')\n        tmp.type = flieArr[flieArr.length - 1]\n        this.updateInfo = tmp;\n        console.log('this.updateInfo',this.updateInfo)\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    },\n    // 查询评论\n    getCommentData(){\n      selectComment({\n        knowledgeId: this.$route.params.id\n      }).then(res => {\n        this.commentArray = res.data\n      }).catch(err=>{\n        console.log(err)\n      })\n    },\n    handleComment(){\n      if(this.content===''){\n        this.$message.error('评论内容不能为空！')\n        return\n      }\n      if(localStorage.getItem('token')){\n        addComment({\n          knowledgeId: this.$route.params.id,\n          content: this.content\n        }).then(res=>{\n          this.content=''\n          this.$message.success('评论成功！')\n          this.getCommentData()\n        }).catch(err=>{\n          console.log(err)\n        })\n      }else{\n        this.$message.error('请先登录')\n      }\n    }\n  },\n  mounted(){\n    this.getData()\n    this.getCommentData()\n\n\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.knowlege-detail-container{\n  width: 1100px;\n\n  margin: 0 auto;\n  background: #fff;\n  min-height: 1200px;\n  padding: 10px 20px;\n  margin-top: 30px;\n  .title{\n    font-size: 25px;\n    text-align: center;\n    font-weight: bold;\n  }\n  .tips{\n    color: #999;\n    display: flex;\n    justify-content: flex-end;\n    height: 30px;\n    align-items: center;\n  }\n  .detail-img{\n    display: flex;\n    justify-content: center;\n    margin-top: 40px;\n    video{\n      border: 1px solid #f2f2f2;\n    }\n    img{\n      border-radius: 6px;\n    }\n  }\n  .detail-content{\n    font-size: 17px;\n    margin-top: 20px;\n\n  }\n  .comment-container{\n    clear: both;\n    margin-top: 10px;\n    .comment-num{\n      font-weight: bold;\n      font-size: 17px;\n      margin-bottom: 10px;\n    }\n    .comment-item{\n      border-bottom: 1px solid #f2f2f2;\n      padding: 10px 20px;\n      margin: 20px 0;\n      word-break: break-all;\n      .comment-tips{\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-end;\n        .color6{\n          color: #666;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}